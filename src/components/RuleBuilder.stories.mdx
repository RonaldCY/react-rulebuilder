import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks'

import { RuleBuilder, RuleBuilderProps } from './RuleBuilder'

<Meta title='Components/RuleBuilder' component={RuleBuilder} />

# RuleBuilder

This is the `RuleBuilder`

```jsx
import { RuleBuilder } from 'react-rulebuilder'
```

<Preview withSource='open'>
  <Story name='Default'>
    <RuleBuilder
      consequenceFields={[
        { value: 'scoreType', label: 'Score Type' },
        { value: 'impression', label: 'Impression' }
      ]}
      queryProps={{
        fields: [{ name: 'age', label: 'Age' }],
        onQueryChange: () => {}
      }}
    />
    >
  </Story>
</Preview>

## Props

<Props of={RuleBuilder} />

## Advance

<Preview withSource='open'>
  <Story name='Advance'>
    <RuleBuilder
      consequenceFields={[
        { value: 'scoreType', label: 'Score Type' },
        { value: 'impression', label: 'Impression' }
      ]}
      inputData={{
        groups: [
          {
            rules: [
              {
                priority: 100,
                condition: {
                  rules: [
                    {
                      rules: [
                        {
                          field: 'sex',
                          value: 'Female',
                          operator: '='
                        },
                        {
                          field: 'menopause',
                          value: '0',
                          operator: '>'
                        }
                      ],
                      combinator: 'and',
                      not: false
                    },
                    {
                      rules: [
                        {
                          field: 'sex',
                          value: 'Male',
                          operator: '='
                        },
                        {
                          field: 'age',
                          value: '50',
                          operator: '<'
                        }
                      ],
                      combinator: 'and',
                      not: false
                    }
                  ],
                  combinator: 'or',
                  not: false
                },
                consequence: {
                  field: 'scoreType',
                  value: 'T'
                },
                function: 'R.next()'
              }
            ]
          }
        ]
      }}
      queryProps={{
        fields: [
          { name: 'age', label: 'Age' },
          { name: 'sex', label: 'Sex' },
          { name: 'menopause', label: 'Menopause' }
        ],
        onQueryChange: () => {}
      }}
    />
    >>
  </Story>
</Preview>
